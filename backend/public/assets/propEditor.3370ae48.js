var H=Object.defineProperty;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var b=(o,e,t)=>e in o?H(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,y=(o,e)=>{for(var t in e||(e={}))I.call(e,t)&&b(o,t,e[t]);if(v)for(var t of v(e))N.call(e,t)&&b(o,t,e[t]);return o};import{Q as O,a as k,b as h,c as R,e as S,f as q,d as L,C as $}from"./ClosePopup.9e02b0e7.js";import{aa as j,r as z,ao as A,az as d,V as _,b2 as l,y as w,bP as E,a3 as s,a2 as U,F as C,b4 as J,bx as Q,X as K,aF as M,bN as X,J as G}from"./index.a3fa791e.js";import{u as x}from"./use-dialog-plugin-component.3fbdabc8.js";import"./QTabs.d68e11be.js";const te={__name:"propEditor",props:["component","env"],emits:[...x.emits],setup(o){const e=o,{$likhaAPI:t,$qs:D}=j().appContext.config.globalProperties,c=z({props:[]});A(async()=>{let n="";e.env==="/dev-env"&&(n="Dev"),e.env==="/staging-env"&&(n="Staging");const i=D.stringify({filters:{name:{$eq:e.component.name}},fields:["props"+n]},{encodeValuesOnly:!0}),{attributes:r}=(await t.get("/components?"+i)).data.data[0],p=a=>typeof a!="string"?"return "+a:a.split(/\b\s+/)[0].includes("return")?a:"return "+a,u=new Function(p(r["props"+n]))()||{},f=e.component["props"+n]||{},m=u.constructor.name;m==="Object"?c.props=Object.entries(u).map(a=>[a[0],y({value:f[a[0]]||a[1].default},a[1])]):m==="Array"&&(c.props=u.map(a=>{const g=f[a]||"";return[a,{value:g,type:String}]}))});const{dialogRef:P,onDialogHide:V,onDialogOK:T,onDialogCancel:F}=x();function B(){let n="";e.env==="/dev-env"&&(n="Dev"),e.env==="/staging-env"&&(n="Staging");const i={};for(const r of c.props)i["props"+n]||(i["props"+n]={}),i["props"+n][r[0]]=r[1].value;T(i)}return(n,i)=>(d(),_(E,{persistent:"",class:"z-top",ref_key:"dialogRef",ref:P,onHide:w(V)},{default:l(()=>[s(L,{style:{"max-height":"500px !important"},view:"hHh LpR fFf",container:"",class:"bg-white"},{default:l(()=>[s(O,{class:"bg-dark"},{default:l(()=>[s(k,null,{default:l(()=>[s(h,null,{default:l(()=>[U(C(o.component.name)+" - "+C(o.component.order),1)]),_:1}),J(s(Q,{flat:"",onClick:w(F),round:"",dense:"",icon:"close"},null,8,["onClick"]),[[$]])]),_:1})]),_:1}),s(R,null,{default:l(()=>[s(S,{padding:"",class:"column bg-dark inset-shadow"},{default:l(()=>[(d(!0),K(G,null,M(c.props,r=>(d(),_(X,{dark:"",key:"prop"+r[0],label:r[0],modelValue:r[1].value,"onUpdate:modelValue":p=>r[1].value=p,type:new r[1].type().constructor.name},null,8,["label","modelValue","onUpdate:modelValue","type"]))),128))]),_:1})]),_:1}),s(q,{class:"bg-dark text-white shadow-up-24"},{default:l(()=>[s(k,null,{default:l(()=>[s(h),s(Q,{color:"primary",onClick:B,icon:"save",label:"save"})]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};export{te as default};
