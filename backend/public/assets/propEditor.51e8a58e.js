var A=Object.defineProperty;var P=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var B=(e,n,o)=>n in e?A(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,$=(e,n)=>{for(var o in n||(n={}))E.call(n,o)&&B(e,o,n[o]);if(P)for(var o of P(n))M.call(n,o)&&B(e,o,n[o]);return e};import{a as D,Q as R}from"./QToolbar.ac7b346c.js";import{br as N,aa as q,ag as H,U as h,ad as F,bu as G,cv as U,cz as J,l as _,bG as X,aZ as w,ap as Z,bF as W,r as Y,ao as ee,az as k,V as S,b2 as m,y as L,cl as te,a3 as f,a2 as ae,F as O,b4 as ne,bx as T,X as oe,aF as re,bL as le,J as se}from"./index.f77b6039.js";import{a as ue,b as ie,c as ce}from"./QLayout.8b982fec.js";import{b as de}from"./QTabs.e68b062f.js";import{u as I,C as fe}from"./use-dialog-plugin-component.83ad75a2.js";var ve=N({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:n}){const{proxy:{$q:o}}=q(),r=H(U);H(J,()=>{console.error("QPage needs to be child of QPageContainer")});const t=h(()=>{const l=(r.header.space===!0?r.header.size:0)+(r.footer.space===!0?r.footer.size:0);if(typeof e.styleFn=="function"){const y=r.isContainer.value===!0?r.containerHeight.value:o.screen.height;return e.styleFn(l,y)}return{minHeight:r.isContainer.value===!0?r.containerHeight.value-l+"px":o.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":o.screen.height-l+"px"}}),v=h(()=>`q-page ${e.padding===!0?" q-layout-padding":""}`);return()=>F("main",{class:v.value,style:t.value},G(n.default))}}),pe=N({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:n,emit:o}){const{proxy:{$q:r}}=q(),t=H(U,()=>{console.error("QFooter needs to be child of QLayout")}),v=_(parseInt(e.heightHint,10)),l=_(!0),y=_(X.value===!0||t.isContainer.value===!0?0:window.innerHeight),b=h(()=>e.reveal===!0||t.view.value.indexOf("F")>-1||r.platform.is.ios&&t.isContainer.value===!0),Q=h(()=>t.isContainer.value===!0?t.containerHeight.value:y.value),s=h(()=>{if(e.modelValue!==!0)return 0;if(b.value===!0)return l.value===!0?v.value:0;const a=t.scroll.value.position+Q.value+v.value-t.height.value;return a>0?a:0}),p=h(()=>e.modelValue!==!0||b.value===!0&&l.value!==!0),i=h(()=>e.modelValue===!0&&p.value===!0&&e.reveal===!0),C=h(()=>"q-footer q-layout__section--marginal "+(b.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(p.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(b.value!==!0?" hidden":""):"")),x=h(()=>{const a=t.rows.value.bottom,d={};return a[0]==="l"&&t.left.space===!0&&(d[r.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),a[2]==="r"&&t.right.space===!0&&(d[r.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),d});function c(a,d){t.update("footer",a,d)}function g(a,d){a.value!==d&&(a.value=d)}function u({height:a}){g(v,a),c("size",a)}function V(){if(e.reveal!==!0)return;const{direction:a,position:d,inflectionPoint:K}=t.scroll.value;g(l,a==="up"||d-K<100||t.height.value-Q.value-d-v.value<300)}function j(a){i.value===!0&&g(l,!0),o("focusin",a)}w(()=>e.modelValue,a=>{c("space",a),g(l,!0),t.animate()}),w(s,a=>{c("offset",a)}),w(()=>e.reveal,a=>{a===!1&&g(l,e.modelValue)}),w(l,a=>{t.animate(),o("reveal",a)}),w([v,t.scroll,t.height],V),w(()=>r.screen.height,a=>{t.isContainer.value!==!0&&g(y,a)});const z={};return t.instances.footer=z,e.modelValue===!0&&c("size",v.value),c("space",e.modelValue),c("offset",s.value),Z(()=>{t.instances.footer===z&&(t.instances.footer=void 0,c("size",0),c("offset",0),c("space",!1))}),()=>{const a=W(n.default,[F(de,{debounce:0,onResize:u})]);return e.elevated===!0&&a.push(F("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),F("footer",{class:C.value,style:x.value,onFocusin:j},a)}}});const Ce={__name:"propEditor",props:["component","env"],emits:[...I.emits],setup(e){const n=e,{$likhaAPI:o,$qs:r}=q().appContext.config.globalProperties,t=Y({props:[]});ee(async()=>{let s="";n.env==="/dev-env"&&(s="Dev"),n.env==="/staging-env"&&(s="Staging");const p=r.stringify({filters:{name:{$eq:n.component.name}},fields:["props"+s]},{encodeValuesOnly:!0}),{attributes:i}=(await o.get("/components?"+p)).data.data[0],C=u=>typeof u!="string"?"return "+u:u.split(/\b\s+/)[0].includes("return")?u:"return "+u,x=new Function(C(i["props"+s]))()||{},c=n.component["props"+s]||{},g=x.constructor.name;g==="Object"?t.props=Object.entries(x).map(u=>[u[0],$({value:c[u[0]]||u[1].default},u[1])]):g==="Array"&&(t.props=x.map(u=>{const V=c[u]||"";return[u,{value:V,type:String}]}))});const{dialogRef:v,onDialogHide:l,onDialogOK:y,onDialogCancel:b}=I();function Q(){let s="";n.env==="/dev-env"&&(s="Dev"),n.env==="/staging-env"&&(s="Staging");const p={};for(const i of t.props)p["props"+s]||(p["props"+s]={}),p["props"+s][i[0]]=i[1].value;y(p)}return(s,p)=>(k(),S(te,{persistent:"",class:"z-top",ref_key:"dialogRef",ref:v,onHide:L(l)},{default:m(()=>[f(ce,{style:{"max-height":"500px !important"},view:"hHh LpR fFf",container:"",class:"bg-white"},{default:m(()=>[f(ue,{class:"bg-dark"},{default:m(()=>[f(D,null,{default:m(()=>[f(R,null,{default:m(()=>[ae(O(e.component.name)+" - "+O(e.component.order),1)]),_:1}),ne(f(T,{flat:"",onClick:L(b),round:"",dense:"",icon:"close"},null,8,["onClick"]),[[fe]])]),_:1})]),_:1}),f(ie,null,{default:m(()=>[f(ve,{padding:"",class:"column bg-dark inset-shadow"},{default:m(()=>[(k(!0),oe(se,null,re(t.props,i=>(k(),S(le,{dark:"",key:"prop"+i[0],label:i[0],modelValue:i[1].value,"onUpdate:modelValue":C=>i[1].value=C,type:new i[1].type().constructor.name},null,8,["label","modelValue","onUpdate:modelValue","type"]))),128))]),_:1})]),_:1}),f(pe,{class:"bg-dark text-white shadow-up-24"},{default:m(()=>[f(D,null,{default:m(()=>[f(R),f(T,{color:"primary",onClick:Q,icon:"save",label:"save"})]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};export{Ce as default};
