var H=Object.defineProperty;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var b=(n,e,t)=>e in n?H(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,y=(n,e)=>{for(var t in e||(e={}))I.call(e,t)&&b(n,t,e[t]);if(v)for(var t of v(e))L.call(e,t)&&b(n,t,e[t]);return n};import{a as k,Q as h}from"./QToolbar.22daece6.js";import{aa as O,r as R,ao as S,az as d,V as Q,b2 as l,y as _,cl as q,a3 as r,a2 as N,F as w,b4 as $,bx as C,X as j,aF as z,bL as A,J as E}from"./index.930c38c3.js";import{d as U,b as J,c as K,a as M}from"./QLayout.483b7fc4.js";import{Q as X}from"./QFooter.2743d2b6.js";import{C as G}from"./ClosePopup.f9ee3419.js";import{u as x}from"./use-dialog-plugin-component.397706fc.js";import"./QTabs.efeab11c.js";const re={__name:"propEditor",props:["component","env"],emits:[...x.emits],setup(n){const e=n,{$likhaAPI:t,$qs:D}=O().appContext.config.globalProperties,p=R({props:[]});S(async()=>{let o="";e.env==="/dev-env"&&(o="Dev"),e.env==="/staging-env"&&(o="Staging");const i=D.stringify({filters:{name:{$eq:e.component.name}},fields:["props"+o]},{encodeValuesOnly:!0}),{attributes:s}=(await t.get("/components?"+i)).data.data[0],c=a=>typeof a!="string"?"return "+a:a.split(/\b\s+/)[0].includes("return")?a:"return "+a,u=new Function(c(s["props"+o]))()||{},f=e.component["props"+o]||{},m=u.constructor.name;m==="Object"?p.props=Object.entries(u).map(a=>[a[0],y({value:f[a[0]]||a[1].default},a[1])]):m==="Array"&&(p.props=u.map(a=>{const g=f[a]||"";return[a,{value:g,type:String}]}))});const{dialogRef:V,onDialogHide:P,onDialogOK:T,onDialogCancel:F}=x();function B(){let o="";e.env==="/dev-env"&&(o="Dev"),e.env==="/staging-env"&&(o="Staging");const i={};for(const s of p.props)i["props"+o]||(i["props"+o]={}),i["props"+o][s[0]]=s[1].value;T(i)}return(o,i)=>(d(),Q(q,{persistent:"",class:"z-top",ref_key:"dialogRef",ref:V,onHide:_(P)},{default:l(()=>[r(M,{style:{"max-height":"500px !important"},view:"hHh LpR fFf",container:"",class:"bg-white"},{default:l(()=>[r(U,{class:"bg-dark"},{default:l(()=>[r(k,null,{default:l(()=>[r(h,null,{default:l(()=>[N(w(n.component.name)+" - "+w(n.component.order),1)]),_:1}),$(r(C,{flat:"",onClick:_(F),round:"",dense:"",icon:"close"},null,8,["onClick"]),[[G]])]),_:1})]),_:1}),r(J,null,{default:l(()=>[r(K,{padding:"",class:"column bg-dark inset-shadow"},{default:l(()=>[(d(!0),j(E,null,z(p.props,s=>(d(),Q(A,{dark:"",key:"prop"+s[0],label:s[0],modelValue:s[1].value,"onUpdate:modelValue":c=>s[1].value=c,type:new s[1].type().constructor.name},null,8,["label","modelValue","onUpdate:modelValue","type"]))),128))]),_:1})]),_:1}),r(X,{class:"bg-dark text-white shadow-up-24"},{default:l(()=>[r(k,null,{default:l(()=>[r(h),r(C,{color:"primary",onClick:B,icon:"save",label:"save"})]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};export{re as default};
